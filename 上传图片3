<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<title>jquery动感下拉导航菜单 在线演示 www.divcss5.com</title>
<!-- <link type="text/css" href="asd.css" rel="stylesheet" /> -->
<!-- <script type="text/javascript" src="bbb.js"></script> -->
<!-- <script type="text/javascript" src="ccc.js"></script> -->
</head>
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js">
</script>
<body>

<style type="text/css">
* { margin:0;
    padding:0;
}
#menu {
    top:30px;
    margin:0 auto;
    width:80%;
}
#copyright {
    margin:100px auto;
    width:80%;
    font:12px 'Trebuchet MS';
    color:#bbb;
    text-indent:20px;
    padding:40px 0 0 0;
}
#copyright a { color:#bbb; }
#copyright a:hover { color:#fff; }


ul,li{padding:0;margin:0;list-style:none;}
a{text-decoration:none;}
#nav li{width:100px;line-height:30px;float:left;}
#nav li a{text-align:center;display:block;width:100px;background:#ccc;}
#nav li a:hover{background:#000;color:#fff;}
.sub-menu{display:none;}
.asd{
	display:none;
}
.ddd{
	display:none;
}
.fff{
  width:300px;
  height:300px;
  padding:10px;
  box-shadow: 1px 2px 3px rgba(0, 0, 0, .7);
  margin-top:100px;
}
</style>

  <ul class="menu">
    <li>
		<a href="http://www.divcss5.com/" class="parent"><span>Home</span></a>
      <div class="asd">
        <ul>
          <li><a href="http://www.divcss5.com/" class="parent"><span>Sub Item 1</span></a>
            <div class="ddd">
              <ul>
                <li><span>Sub Item 1.1<input name="Fruit" type="checkbox" value="" /></span></li>
                <li><span>css工具<input name="Fruit" type="checkbox" value="" /></span></li>
              </ul>
            </div>
          </li>
          <li><a href="#"><span>Sub Item 2</span></a></li>
        </ul>
      </div>
    </li>

  </ul>
  
  <table border="1px" width="100%" align="center">
    <tbody>
    <tr>
        <td> <select>
            <option >B北京</option>
            <option >S上海</option>
            <option >G广州</option>
            <option >S深圳</option>
        </select></td>
        <td></td>
    </tr>
    </tbody>
</table>


<ul id="nav">
    <li><a href="">分类 1</a></li>
    <li><a href="">分类 2</a></li>
    <li><a href="">分类 3</a>
        <ul class="sub-menu">
            <li><a href="">分类 3.1</a></li>
            <li><a href="">分类 3.2</a></li>
            <li><a href="">分类 3.3</a></li>
        </ul>
    </li>
    <li><a href="">分类 4</a></li>
</ul>


<!-- <input type="text" id="txt1" value="abcde" onclick="getTxt1CursorPosition()"> -->
<div id="txt1" contentEditable="plaintext-only" onclick="getTxt1CursorPosition()">asdasdasdasdasd</div>

<div class="fff" contenteditable=""></div>
<span class="btn insert">
  点我
</span>



<input type="file" name="" id="a" value="" onclick="Click()" />

<script>
	function Click(){
		var a = document.querySelector('#a');
		var e = event || window.event;
		if(a.value != '')
		{
			alert(a.value);
			e.preventDefault();
		}
	}
</script>

<script>
	var $ = (sel) => document.querySelector(sel), textRange = null;
	var edit = $('.fff'), btn = $('.insert');

	edit.onblur = function () {
	  // var sel = window.getSelection();
	  textRange = window.getSelection().getRangeAt(0);
	}
	console.log(textRange);
	btn.onclick = function () {
	  if (textRange) {
	  	var img = document.createElement("img");
	img.setAttribute("src","z_add.png");
		textRange.insertNode(img);
	  }
	}
</script>

<!-- <script> -->
<!-- function getTxt1CursorPosition(){ -->
	<!-- var oTxt1 = document.getElementById("txt1"); -->
	<!-- var cursurPosition=-1; -->
	<!-- if(oTxt1.selectionStart){//非IE浏览器 -->
		<!-- cursurPosition= oTxt1.selectionStart; -->
	<!-- }else{//IE -->
		<!-- var range = document.selection.createRange(); -->
		<!-- range.moveStart("character",-oTxt1.value.length); -->
		<!-- cursurPosition=range.text.length; -->
	<!-- } -->
		<!-- alert(cursurPosition); -->
<!-- } -->
<!-- </script> -->
<!-- <script type="text/javascript"> -->
    <!-- jQuery(document).ready(function($) { -->
        <!-- $('#nav li').hover(function() { -->
            <!-- $('ul', this).slideDown(300); -->
        <!-- }, -->
        <!-- function() { -->
            <!-- $('ul', this).slideUp(300); -->
        <!-- }); -->
    <!-- }); -->
<!-- </script> -->
<!-- <script> -->
	<!-- $(function(){ -->
		<!-- $(".menu li").hover(function(){ -->
			<!-- $(".asd", this).filter(':not(:animated)').slideDown(300); -->
		<!-- },function(){ -->
			<!-- $(".asd", this).filter(':not(:animated)').slideUp(300); -->
		<!-- }); -->
		<!-- $(".asd li").hover(function(){ -->
			<!-- $(".ddd", this).filter(':not(:animated)').slideDown(300);			 -->
		<!-- },function(){ -->
			<!-- $(".ddd", this).filter(':not(:animated)').slideUp(300); -->
		<!-- }); -->
	<!-- }); -->
<!-- </script> -->

<script>
function insertHtmlAtCaret(str) {
    var sel, range;
    if(window.getSelection){
        sel = window.getSelection();
        if (sel.getRangeAt && sel.rangeCount) {
            range = sel.getRangeAt(0);
            range.deleteContents();
            var el = document.createElement("div");
            el.innerHTML = str;
            var frag = document.createDocumentFragment(), node, lastNode;
            while ( (node = el.firstChild) ) {
                lastNode = frag.appendChild(node);
            }
                range.insertNode(frag);
            if(lastNode){
                range = range.cloneRange();
                range.setStartAfter(lastNode);
                range.collapse(true);
                sel.removeAllRanges();
                sel.addRange(range);
            }
        }
    } else if (document.selection && document.selection.type != "Control") {
        document.selection.createRange().pasteHTML(str);
    }
}
</script>
</body>
</html>
